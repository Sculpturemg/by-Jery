<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>L'Art de la Sculpture Malgache</title>

<style>
body { margin:0; font-family: Arial, sans-serif; background:#f7f3ef; }
header { background:#2f2b28; color:white; padding:15px; text-align:center; font-size:22px; font-weight:bold; }
nav { display:flex; flex-wrap:wrap; justify-content:center; gap:10px; background:#403c38; padding:10px; }
nav button { padding:10px 15px; background:#d9a066; border:none; color:white; cursor:pointer; border-radius:5px; font-weight:bold; }
nav button:hover { background:#bb873f; }
section { display:none; padding:20px; }
section.visible { display:block; }
.hero { text-align:center; background:white; padding:20px; border-radius:10px; }
.hero img { width:100%; max-height:300px; object-fit:cover; border-radius:10px; cursor:pointer; }
.gallery { display:grid; grid-template-columns:repeat(auto-fill, minmax(150px,1fr)); gap:10px; }
.gallery img { width:100%; height:150px; object-fit:cover; border-radius:8px; cursor:pointer; }
.service-card { background:white; padding:15px; border-radius:10px; margin-bottom:15px; box-shadow:0 2px 8px rgba(0,0,0,0.15); }

.admin-panel { 
  background:#fff3d6; padding:15px; border-radius:10px; margin-top:10px; 
  display:none; /* Caché pour les visiteurs */
}
.admin-panel textarea, .admin-panel input { width:100%; padding:10px; margin-bottom:10px; }
.admin-panel button { padding:10px; background:#d9a066; color:white; border:none; border-radius:5px; cursor:pointer; }

#loginBox { 
  background:white; padding:20px; border-radius:10px; width:90%; max-width:350px; 
  margin:40px auto; box-shadow:0 2px 8px rgba(0,0,0,0.2);
}
#loginBox input { width:100%; padding:10px; margin-bottom:10px; }

.lightbox { 
  position:fixed; top:0; left:0; width:100%; height:100%; 
  background:rgba(0,0,0,0.8); display:none; justify-content:center; align-items:center;
}
.lightbox img { max-width:90%; max-height:90%; border-radius:10px; }
</style>
</head>
<body>

<header>L'Art de la Sculpture Malgache</header>

<nav>
<button onclick="openSection('accueil')">Accueil</button>
<button onclick="openSection('apropos')">À propos</button>
<button onclick="openSection('services')">Services</button>
<button onclick="openSection('galerie')">Galerie</button>
<button onclick="openSection('contact')">Contact</button>
<button onclick="openSection('adminLogin')">Admin</button>
</nav>

<!-- LOGIN ADMIN -->
<section id="adminLogin" class="visible">
<div id="loginBox">
<h3>Connexion Admin</h3>
<input id="loginEmail" placeholder="Email Admin">
<input id="loginPass" type="password" placeholder="Mot de passe">
<button onclick="adminLogin()">Se connecter</button>
<p id="loginError" style="color:red;"></p>
</div>
</section>

<!-- ACCUEIL -->
<section id="accueil">
<h2>Bienvenue dans l'univers de la sculpture malgache</h2>
<img id="imgAccueil" src="" alt="Image accueil" onclick="openLightbox(this.src)">
<p id="textAccueil">Texte d'accueil sur le sculpteur malgache (modifiable par admin).</p>

<div class="admin-panel" id="adminAccueil">
<h3>Modifier Accueil</h3>
<textarea id="editAccueil" rows="4"></textarea>
<input type="file" accept="image/*" onchange="changeAccueilImage(event)">
<button onclick="saveAccueil()">Enregistrer</button>
</div>
</section>

<!-- A PROPOS -->
<section id="apropos">
<h2>À propos</h2>
<p id="textApropos">Biographie modifiable du sculpteur malgache.</p>

<div class="admin-panel" id="adminApropos">
<textarea id="editApropos" rows="4"></textarea>
<button onclick="saveApropos()">Enregistrer</button>
</div>
</section>

<!-- SERVICES -->
<section id="services">
<h2>Nos Services</h2>
<div id="listServices">
<div class="service-card">Commandes personnalisées</div>
<div class="service-card">Restauration d'œuvres</div>
<div class="service-card">Expositions</div>
<div class="service-card">Ateliers & Formations</div>
</div>

<div class="admin-panel" id="adminServices">
<textarea id="editServices" rows="5"></textarea>
<button onclick="saveServices()">Enregistrer</button>
</div>
</section>

<!-- GALERIE -->
<section id="galerie">
<h2>Galerie</h2>
<div class="gallery" id="galleryContainer"></div>

<div class="admin-panel" id="adminGalerie">
<h3>Ajouter une image</h3>
<input type="file" accept="image/*" onchange="addGalleryImage(event)">
<h3>Gérer les images</h3>
<div id="galleryAdmin"></div>
</div>
</section>

<!-- CONTACT -->
<section id="contact">
<h2>Contact</h2>
<p>Email : <span id="contactEmail">sculpture@example.com</span></p>
<p>Téléphone : <span id="contactTel">+261 34 00 000 00</span></p>
<p>Facebook : <span id="contactFB">facebook.com/sculpture</span></p>
<p>WhatsApp : <span id="contactWA">+261 34 00 000 00</span></p>

<div class="admin-panel" id="adminContact">
<input id="editEmail" placeholder="Email">
<input id="editTel" placeholder="Téléphone">
<input id="editFB" placeholder="Facebook">
<input id="editWA" placeholder="WhatsApp">
<button onclick="saveContact()">Enregistrer</button>
</div>
</section>

<!-- LIGHTBOX -->
<div id="lightbox" class="lightbox" onclick="this.style.display='none'">
<img id="lightboxImg">
</div>

<script>
let galleryData = [];
let adminLogged = false;
const ADMIN_EMAIL = "admin@example.com";
const ADMIN_PASS = "123456";

function openSection(id){
  document.querySelectorAll("section").forEach(s=>s.classList.remove("visible"));
  document.getElementById(id).classList.add("visible");
}

function adminLogin(){
  let email = loginEmail.value;
  let pass = loginPass.value;

  if(email === ADMIN_EMAIL && pass === ADMIN_PASS){
    adminLogged = true;
    loginError.textContent = "";
    document.querySelectorAll(".admin-panel").forEach(el=>el.style.display="block");
    openSection('accueil');
  } else {
    loginError.textContent = "Email ou mot de passe incorrect";
  }
}

function openLightbox(src){
  if(!src) return;
  lightbox.style.display = "flex";
  lightboxImg.src = src;
}

/* ACCUEIL */
function changeAccueilImage(event){
  let file = event.target.files[0];
  if(file){
    let r = new FileReader();
    r.onload = e => imgAccueil.src = e.target.result;
    r.readAsDataURL(file);
  }
}
function saveAccueil(){
  textAccueil.textContent = editAccueil.value;
}

/* A PROPOS */
function saveApropos(){
  textApropos.textContent = editApropos.value;
}

/* SERVICES */
function saveServices(){
  let arr = editServices.value.split("\n").filter(x=>x);
  listServices.innerHTML = arr.map(s=>`<div class="service-card">${s}</div>`).join("");
}

/* CONTACT */
function saveContact(){
  contactEmail.textContent = editEmail.value || contactEmail.textContent;
  contactTel.textContent = editTel.value || contactTel.textContent;
  contactFB.textContent = editFB.value || contactFB.textContent;
  contactWA.textContent = editWA.value || contactWA.textContent;
}

/* GALERIE */
function addGalleryImage(event){
  let file = event.target.files[0];
  if(file){
    let r = new FileReader();
    r.onload = e=>{
      galleryData.push({image:e.target.result});
      renderGallery();
      renderGalleryAdmin();
    };
    r.readAsDataURL(file);
  }
}

function renderGallery(){
  galleryContainer.innerHTML = galleryData.map(
    (g,i)=>`<img src="${g.image}" onclick="openLightbox('${g.image}')">`
  ).join("");
}

function renderGalleryAdmin(){
  galleryAdmin.innerHTML = "";
  galleryData.forEach((g,i)=>{
    galleryAdmin.innerHTML += `
      <div style="margin:10px 0;">
        <img src="${g.image}" style="width:80px;height:80px;object-fit:cover;border-radius:5px;">
        <button onclick="deleteGallery(${i})">Supprimer</button>
      </div>`;
  });
}

function deleteGallery(i){
  galleryData.splice(i,1);
  renderGallery();
  renderGalleryAdmin();
}
</script>

</body>
</html>
